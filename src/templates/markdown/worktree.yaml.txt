# Worktree Configuration for Multi-Agent Pipeline
# Used for worktree initialization in multi-agent workflows
#
# All paths are relative to project root

#-------------------------------------------------------------------------------
# Paths
#-------------------------------------------------------------------------------

# Worktree storage directory (relative to project root)
# Recommended: keep worktrees outside the main repo to avoid conflicts
worktree_dir: ../<project-name>-worktrees

#-------------------------------------------------------------------------------
# Files to Copy
#-------------------------------------------------------------------------------

# Files to copy to each worktree (each worktree needs independent copy)
# These files contain sensitive info or need worktree-independent config
copy:
  # Environment variables (uncomment and customize as needed)
  # - .env
  # - .env.local
  # Workflow config
  - .trellis/.developer

#-------------------------------------------------------------------------------
# Post-Create Hooks
#-------------------------------------------------------------------------------

# Commands to run after creating worktree
# Executed in worktree directory, in order, abort on failure
post_create:
  # Install dependencies (uncomment based on your package manager)
  # - npm install
  # - pnpm install --frozen-lockfile
  # - yarn install --frozen-lockfile
  # - pip install -r requirements.txt
  # - bundle install
  # - cargo build

#-------------------------------------------------------------------------------
# Pre-Merge Checks
#-------------------------------------------------------------------------------

# Pre-merge validation (used by create-pr.sh)
pre_merge:
  # Type checking (uncomment based on your setup)
  # - npm run typecheck
  # - pnpm typecheck
  # - mypy .
  # Linting
  # - npm run lint
  # - pnpm lint
  # - ruff check .
  # Testing
  # - npm test
  # - pytest
