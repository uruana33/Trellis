# 文档协作工具调研

## 背景

随着 Claude Code 使用越来越频繁，团队写 Markdown 文档越来越多，已经很少使用 Notion 了。但团队仍有协作需求：

- PRD 和营销计划文档分散在各 Git 仓库和本地文件夹中
- 产品/运营团队需要协作阅读和编辑这些文档
- Obsidian 等工具无法聚合多仓库文档

## 核心需求

1. **聚合多仓库 Markdown 文档**：把各项目中的 PRD、营销文档聚合到一处
2. **团队协作**：支持非技术人员（产品/运营）协作编辑
3. **Markdown 原生**：保持与 Git 仓库的格式兼容
4. **Claude Code 集成**：支持 MCP，可在开发流程中直接操作

---

## 方案对比

### 方案一：Notion

**优势**
- 界面精美，用户体验极佳
- 学习成本极低，非技术人员无障碍上手
- 实时协作成熟稳定
- 功能丰富（数据库、看板、日历、嵌入等）
- 有 MCP 集成，Claude Code 可操作
- 无需运维，开箱即用

**劣势**
- 非原生 Markdown，导入导出有格式损耗
- 数据托管国外，网络/合规风险
- 按人头付费，团队扩大成本高
- 平台锁定风险
- Git 双向同步复杂

---

### 方案二：Outline

**优势**
- 原生 Markdown 存储，与 Git 仓库格式一致
- 开源可自托管，数据完全自主
- 有 MCP 集成
- 协作功能完善（实时编辑、权限、评论）
- 自托管长期成本低
- 界面简洁专注于文档

**劣势**
- 自托管需要服务器运维
- 托管版也按人头付费
- 功能相对 Notion 简单
- 社区规模较小

---

### 方案三：自建（参考 HackMD）

**优势**
- 完全可控，按需定制功能
- 数据完全自主
- 可深度集成 Git 工作流（双向同步）
- 长期边际成本最低
- 可沉淀为产品/开源项目

**劣势**
- 前期开发成本高
- 需要持续维护投入
- 协作功能需从头实现（OT/CRDT）
- 上线周期长
- 需要专人负责

**战略意义**
- **验证 Trellis 能力**：自建协同文档是技术复杂度很高的产品，可以测试 Trellis 架构处理复杂系统的能力
- **机器可读优先**：未来文件需要高机器可读性，这可能是协同文档应用的真正形态——为 AI Agent 设计的文档系统，而非仅为人类设计

---

## 初步结论

| 方案 | 短期可行性 | 长期价值 | 推荐场景 |
|------|-----------|---------|---------|
| Notion | 高 | 中 | 快速上手，不介意格式损耗 |
| Outline | 高 | 高 | 重视 Markdown 兼容，有运维能力 |
| 自建 | 低 | 最高 | 战略投入，验证 Trellis + 探索未来形态 |

---

## 待深入调研

- [ ] Outline 自托管部署复杂度
- [ ] Outline 托管版 vs 自托管成本对比
- [ ] 自建方案技术选型（OT vs CRDT）
- [ ] 现有开源协同编辑器可复用组件
