# Trellis

<!-- ğŸ–¼ï¸ [IMAGE] Banner: å“ç‰Œæ¨ªå¹…å›¾ï¼ŒåŒ…å« Logo + "ç»“æ„åŒ–. å¼•å¯¼. äº¤ä»˜." æ ‡è¯­
     å°ºå¯¸å»ºè®®: 1280x640 æˆ– 1200x300
     æ–‡ä»¶: assets/banner.png (å¯å¤ç”¨è‹±æ–‡ç‰ˆ)
-->

**ç»“æ„åŒ–. å¼•å¯¼. äº¤ä»˜.**

[English](./README.md) | ä¸­æ–‡

[![npm version](https://img.shields.io/npm/v/@mindfoldhq/trellis)](https://www.npmjs.com/package/@mindfoldhq/trellis)
[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)
[![Claude Code](https://img.shields.io/badge/Claude%20Code-Compatible-blueviolet)](https://claude.ai/code)
[![Cursor](https://img.shields.io/badge/Cursor-Compatible-blue)](https://cursor.sh)

> AI èƒ½åŠ›å¦‚è—¤è”“èˆ¬ç”Ÿé•¿ â€”â€” ç”Ÿæœºå‹ƒå‹ƒå´å››å¤„è”“å»¶ã€‚
> Trellis æä¾›æ”¯æ¶ï¼Œå¼•å¯¼å®ƒä»¬æ²¿ç€è§„èŒƒçš„è·¯å¾„æ”€å‡ã€‚

---

## ä¸ºä»€ä¹ˆé€‰æ‹© Trellisï¼Ÿ

**ä½ çš„ AI åŠ©æ‰‹åœ¨ä¼šè¯ä¹‹é—´ä¼šå¿˜è®°ä¸€åˆ‡ã€‚**

æ¯æ¬¡å¯¹è¯éƒ½ä»é›¶å¼€å§‹ã€‚åŒæ ·çš„é”™è¯¯åå¤å‡ºç°ã€‚è§„èŒƒå†™äº†å´æ²¡äººéµå®ˆã€‚å¤š Agent åä½œåƒåœ¨æ”¾ç¾Šã€‚

Trellis è§£å†³è¿™äº›é—®é¢˜ã€‚

| é—®é¢˜ | Trellis æ–¹æ¡ˆ |
|------|--------------|
| AI ç¼ºä¹é¡¹ç›®ä¸Šä¸‹æ–‡ | è§„èŒƒæŒä¹…åŒ–å­˜å‚¨åœ¨ `.trellis/structure/`ï¼Œå›¢é˜Ÿå…±äº« |
| è§„èŒƒå†™äº†ä½†è¢«å¿½ç•¥ | æŒ‰éœ€æ³¨å…¥ â€”â€” æ¯ä¸ª Agent åªæ¥æ”¶å®ƒéœ€è¦çš„å†…å®¹ |
| å·¥ä½œæµéœ€è¦äººå·¥ç›‘ç£ | æ–œæ å‘½ä»¤å°è£…å®Œæ•´æµç¨‹ï¼ˆ`/start`ã€`/parallel`ï¼‰ |
| å¤š Agent å¹¶è¡Œå¾ˆéš¾ | ä¸€é”®å¯åŠ¨ï¼ŒGit Worktree ç‰©ç†éš”ç¦» |

---

## å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
npm install -g @mindfoldhq/trellis@latest
```

### åˆå§‹åŒ–

```bash
cd your-project
trellis init -u your-name
```

### å¼€å§‹ä½¿ç”¨

**Claude Code:**
```
/start â†’ æè¿°ä½ çš„ä»»åŠ¡ â†’ /record-agent-flow
```

**å¤æ‚åŠŸèƒ½ï¼ˆå¤š Agent æµæ°´çº¿ï¼‰:**
```
/parallel â†’ æè¿°éœ€æ±‚ â†’ /record-agent-flow
```

---

## æ ¸å¿ƒæ¦‚å¿µ

### ä¸‰å¤§æ”¯æŸ±

```
.trellis/
â”œâ”€â”€ structure/      # ğŸ“š è§„èŒƒ â€” å›¢é˜ŸçŸ¥è¯†ï¼ŒAI çš„è¡Œä¸ºå‡†åˆ™
â”œâ”€â”€ agent-traces/   # ğŸ“ è®°å¿† â€” ä¼šè¯å†å²ï¼ŒåŠŸèƒ½è¿½è¸ª
â””â”€â”€ scripts/        # âš™ï¸ è‡ªåŠ¨åŒ– â€” ç¡®å®šæ€§ã€å¯é‡å¤çš„æ“ä½œ
```

| æ”¯æŸ± | ä½œç”¨ | ä»·å€¼ |
|------|------|------|
| **Structure** | å­˜å‚¨ç¼–ç è§„èŒƒã€æ¶æ„å†³ç­– | è§„èŒƒçœŸæ­£è¢«éµå®ˆ |
| **Agent-traces** | è®°å½•å·¥ä½œå†å²ã€åŠŸèƒ½ä¸Šä¸‹æ–‡ | æ¢å¤ä»»æ„ä¼šè¯ï¼Œè¿½æº¯ä»»æ„å†³ç­– |
| **Scripts** | å°è£…å¤æ‚æ“ä½œ | AI æ‰§è¡Œä¸€è‡´ï¼Œä¸ä¼šé—æ¼æ­¥éª¤ |

### æ–œæ å‘½ä»¤

| å‘½ä»¤ | ç”¨é€” |
|------|------|
| `/start` | åˆå§‹åŒ–ä¼šè¯ï¼ŒåŠ è½½ä¸Šä¸‹æ–‡ |
| `/parallel` | å¯åŠ¨å¤š Agent æµæ°´çº¿ï¼ˆClaude Codeï¼‰ |
| `/before-frontend-dev` | ç¼–ç å‰è¯»å–å‰ç«¯è§„èŒƒ |
| `/before-backend-dev` | ç¼–ç å‰è¯»å–åç«¯è§„èŒƒ |
| `/check-frontend` | æ ¹æ®è§„èŒƒå®¡æŸ¥ä»£ç  |
| `/check-backend` | æ ¹æ®è§„èŒƒå®¡æŸ¥ä»£ç  |
| `/check-cross-layer` | è·¨å±‚æ•°æ®æµéªŒè¯ |
| `/finish-work` | æäº¤å‰æ£€æŸ¥æ¸…å• |
| `/record-agent-flow` | è®°å½•ä¼šè¯åˆ° traces |

### å¤š Agent æµæ°´çº¿

<!-- ğŸ–¼ï¸ [IMAGE] æ¶æ„å›¾: æ›¿æ¢ä¸‹æ–¹ ASCII æµç¨‹å›¾
     å†…å®¹: Plan â†’ Implement â†’ Check â†’ Create PR å››é˜¶æ®µæµç¨‹
     é£æ ¼: ç®€æ´çš„æµç¨‹å›¾ï¼Œå¸¦å›¾æ ‡
     å°ºå¯¸å»ºè®®: 800x400
     æ–‡ä»¶: assets/pipeline.png (å¯å¤ç”¨è‹±æ–‡ç‰ˆ)
-->

```
/parallel
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Plan Agent  â”‚ â†’  â”‚  Implement  â”‚ â†’  â”‚ Check Agent â”‚ â†’  â”‚  Create PR  â”‚
â”‚             â”‚    â”‚    Agent    â”‚    â”‚             â”‚    â”‚             â”‚
â”‚ åˆ†æéœ€æ±‚    â”‚    â”‚ ç¼–å†™ä»£ç     â”‚    â”‚ å®¡æŸ¥ +      â”‚    â”‚ æäº¤ +      â”‚
â”‚ é…ç½®ä¸Šä¸‹æ–‡  â”‚    â”‚ è¿è¡Œæµ‹è¯•    â”‚    â”‚ è‡ªåŠ¨ä¿®å¤    â”‚    â”‚ æ¨é€ + PR   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                  â”‚
       â–¼                  â–¼                  â–¼
   feature.json      implement.jsonl    Ralph Loop
   prd.md            (ä¸Šä¸‹æ–‡æ³¨å…¥)        (è´¨é‡é—¨ç¦)
```

**æ ¸å¿ƒç‰¹æ€§ï¼š**
- **Git Worktree éš”ç¦»** â€” æ¯ä¸ª Agent åœ¨ç‹¬ç«‹ç›®å½•å·¥ä½œ
- **åˆ†é˜¶æ®µä¸Šä¸‹æ–‡æ³¨å…¥** â€” Hook æŒ‰é˜¶æ®µåªæ³¨å…¥ç›¸å…³æ–‡ä»¶
- **Ralph Loop** â€” è´¨é‡é—¨ç¦ï¼Œlint/typecheck å…¨é€šè¿‡æ‰èƒ½ç»“æŸ

---

## æ”¯æŒçš„å·¥å…·

| å·¥å…· | æ”¯æŒç¨‹åº¦ |
|------|----------|
| **Claude Code** | å®Œæ•´æ”¯æŒï¼ˆæ–œæ å‘½ä»¤ + Agents + Hooks + å¤š Agent æµæ°´çº¿ï¼‰ |
| **Cursor** | ä»…æ”¯æŒæ–œæ å‘½ä»¤ |

---

## é¡¹ç›®ç»“æ„

```
your-project/
â”œâ”€â”€ AGENTS.md                    # è½»é‡çº§ AI æŒ‡ä»¤
â”œâ”€â”€ .trellis/                    # å·¥ä½œæµä¸­å¿ƒ
â”‚   â”œâ”€â”€ workflow.md              # å¼€å‘æµç¨‹ï¼ˆä¼˜å…ˆé˜…è¯»ï¼‰
â”‚   â”œâ”€â”€ worktree.yaml            # å¤š Agent é…ç½®
â”‚   â”œâ”€â”€ structure/               # å¼€å‘è§„èŒƒ
â”‚   â”‚   â”œâ”€â”€ backend/             # åç«¯è§„èŒƒ
â”‚   â”‚   â”œâ”€â”€ frontend/            # å‰ç«¯è§„èŒƒ
â”‚   â”‚   â””â”€â”€ guides/              # æ€è€ƒæŒ‡å—
â”‚   â”œâ”€â”€ agent-traces/            # ä¼šè¯è®°å½•
â”‚   â”‚   â””â”€â”€ {developer}/
â”‚   â”‚       â”œâ”€â”€ traces-N.md      # ä¼šè¯æ—¥å¿—
â”‚   â”‚       â””â”€â”€ features/        # åŠŸèƒ½ç›®å½•
â”‚   â”œâ”€â”€ backlog/                 # éœ€æ±‚æ± 
â”‚   â””â”€â”€ scripts/                 # è‡ªåŠ¨åŒ–è„šæœ¬
â”œâ”€â”€ .claude/                     # Claude Code é…ç½®
â”‚   â”œâ”€â”€ commands/                # æ–œæ å‘½ä»¤
â”‚   â”œâ”€â”€ agents/                  # Agent å®šä¹‰
â”‚   â””â”€â”€ hooks/                   # è‡ªåŠ¨åŒ–é’©å­
â””â”€â”€ .cursor/                     # Cursor é…ç½®
    â””â”€â”€ commands/                # æ–œæ å‘½ä»¤
```

---

## å·¥ä½œåŸç†

### 1. è§„èŒƒç³»ç»Ÿï¼ˆ`.trellis/structure/`ï¼‰

å›¢é˜Ÿçš„çŸ¥è¯†èµ„äº§ã€‚AI åœ¨å®ç°å’Œå®¡æŸ¥ä»£ç æ—¶å‚è€ƒè¿™äº›è§„èŒƒã€‚

```
structure/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ index.md                 # å…¥å£
â”‚   â”œâ”€â”€ database-guidelines.md   # æ•°æ®åº“è§„èŒƒ
â”‚   â”œâ”€â”€ error-handling.md        # é”™è¯¯å¤„ç†ç­–ç•¥
â”‚   â””â”€â”€ ...
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ index.md                 # å…¥å£
â”‚   â”œâ”€â”€ component-guidelines.md  # ç»„ä»¶è§„èŒƒ
â”‚   â”œâ”€â”€ state-management.md      # çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ ...
â””â”€â”€ guides/
    â”œâ”€â”€ cross-layer-thinking-guide.md    # è·¨å±‚å¼€å‘å‰æ€è€ƒ
    â””â”€â”€ code-reuse-thinking-guide.md     # åˆ›å»ºæ–°ä»£ç å‰æ€è€ƒ
```

**æ ¸å¿ƒç†å¿µï¼š** è§„èŒƒè¶Šæ¸…æ™° = AI æ‰§è¡Œè¶Šå¥½ã€‚å‘ç°é—®é¢˜å°±æ›´æ–°è§„èŒƒã€‚

### 2. ä¼šè¯è¿½è¸ªï¼ˆ`.trellis/agent-traces/`ï¼‰

è®°å½•æ‰€æœ‰ AI å·¥ä½œå†å²ã€‚æ”¯æŒå¤šå¼€å‘è€…åä½œã€‚

```
agent-traces/
â””â”€â”€ {developer}/
    â”œâ”€â”€ index.md                 # ä¸ªäººä¼šè¯ç´¢å¼•
    â”œâ”€â”€ traces-N.md              # ä¼šè¯è®°å½•
    â””â”€â”€ features/                # åŠŸèƒ½ç›®å½•
        â””â”€â”€ {day}-{name}/
            â”œâ”€â”€ feature.json     # å…ƒæ•°æ®
            â”œâ”€â”€ prd.md           # éœ€æ±‚æ–‡æ¡£
            â”œâ”€â”€ implement.jsonl  # å®ç°é˜¶æ®µä¸Šä¸‹æ–‡
            â””â”€â”€ check.jsonl      # æ£€æŸ¥é˜¶æ®µä¸Šä¸‹æ–‡
```

**å¯è¿½æº¯æ€§ï¼š** æ¯ä¸ªåŠŸèƒ½éƒ½è®°å½•äº†ä½¿ç”¨äº†å“ªäº›è§„èŒƒã€å‚è€ƒäº†å“ªäº›ä»£ç ã€ä¸ºä»€ä¹ˆè¿™æ ·åšã€‚

### 3. è‡ªåŠ¨åŒ–é’©å­ï¼ˆ`.claude/hooks/`ï¼‰

ä¸¤ä¸ª Python è„šæœ¬é©±åŠ¨è‡ªåŠ¨åŒ–ï¼š

**`inject-subagent-context.py`** â€” ä¸Šä¸‹æ–‡æ³¨å…¥
- åœ¨ Task å·¥å…·è°ƒç”¨å‰è§¦å‘
- è¯»å– `.jsonl` æ–‡ä»¶ç¡®å®šéœ€è¦æ³¨å…¥å“ªäº›æ–‡ä»¶
- æ¯ä¸ª Agent åªæ¥æ”¶ç›¸å…³ä¸Šä¸‹æ–‡

**`ralph-loop.py`** â€” è´¨é‡æ§åˆ¶
- åœ¨ Check Agent å°è¯•åœæ­¢æ—¶è§¦å‘
- è¿è¡ŒéªŒè¯å‘½ä»¤ï¼ˆlintã€typecheckï¼‰
- å…¨éƒ¨é€šè¿‡æ‰å…è®¸ç»“æŸï¼ˆæœ€å¤š 5 æ¬¡è¿­ä»£ï¼‰

---

## é…ç½®

### `worktree.yaml` â€” å¤š Agent æµæ°´çº¿é…ç½®

```yaml
worktree_dir: ../trellis-worktrees
copy:
  - .env
  - .trellis/.developer
post_create:
  - pnpm install --frozen-lockfile
verify:
  - pnpm lint
  - pnpm typecheck
```

| å­—æ®µ | è¯´æ˜ |
|------|------|
| `worktree_dir` | Git Worktree åˆ›å»ºä½ç½® |
| `copy` | éœ€è¦å¤åˆ¶åˆ° Worktree çš„æ–‡ä»¶ |
| `post_create` | Worktree åˆ›å»ºåè¿è¡Œçš„å‘½ä»¤ |
| `verify` | Check Agent ç»“æŸå‰å¿…é¡»é€šè¿‡çš„å‘½ä»¤ |

---

## å¯¹æ¯”

### vs Planning-with-Files

| ç»´åº¦ | Planning-with-Files | Trellis |
|------|---------------------|---------|
| èŒƒå›´ | ä¼šè¯çº§ï¼ˆå•æ¬¡ä»»åŠ¡ï¼‰ | é¡¹ç›®çº§ï¼ˆè·¨ä¼šè¯ï¼‰ |
| æ–‡ä»¶ | 3 ä¸ªå›ºå®šæ–‡ä»¶ | çµæ´»ç»“æ„ |
| å¤š Agent | ä¸æ”¯æŒ | æ”¯æŒï¼ˆGit Worktree éš”ç¦»ï¼‰ |
| è§„èŒƒç³»ç»Ÿ | æ—  | å®Œæ•´çš„è§„èŒƒç³»ç»Ÿ |

### vs BMAD-METHOD

| ç»´åº¦ | BMAD-METHOD | Trellis |
|------|-------------|---------|
| å¤æ‚åº¦ | é‡å‹ï¼ˆ21 agentsï¼Œ50+ workflowsï¼‰ | è½»é‡ï¼ˆ6 agentsï¼Œ13 commandsï¼‰ |
| å­¦ä¹ æ›²çº¿ | é™¡å³­ | æ¸è¿› |
| å®šåˆ¶æ–¹å¼ | æ¡†æ¶é©±åŠ¨ | æ¨¡æ¿é©±åŠ¨ |

---

## æ–‡æ¡£

- [å®Œæ•´æ–‡æ¡£](./docs/README.md) â€” å®Œæ•´å‚è€ƒ
- [ç”¨ K8s æ¦‚å¿µç†è§£ Trellis](./docs/use-k8s-to-know-trellis.md) â€” é€‚åˆ K8s ç”¨æˆ·

---

## ç¤¾åŒº

- [GitHub Issues](https://github.com/mindfoldhq/trellis/issues) â€” Bug æŠ¥å‘Šã€åŠŸèƒ½è¯·æ±‚
- [GitHub Discussions](https://github.com/mindfoldhq/trellis/discussions) â€” é—®é¢˜ã€æƒ³æ³•

---

## è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·æŸ¥çœ‹ [CONTRIBUTING.md](./CONTRIBUTING.md) äº†è§£è´¡çŒ®æŒ‡å—ã€‚

---

## è®¸å¯è¯

[MIT](./LICENSE)

---

<p align="center">
  <sub>ç”± <a href="https://mindfold.com">Mindfold</a> ä¸“æ³¨æ‰“é€ </sub>
</p>
